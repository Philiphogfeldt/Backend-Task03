@page
@model Backend_Task03.Pages.Accounts.IndexModel
@inject Backend_Task03.Data.AccessControl AccessControl

@{
	ViewData["Title"] = "Index";
}
<div class="adminGrid">
	@if (AccessControl.LoggedInAccountRole == "Admin")
	{
		<h1>Accounts</h1>

		<div class="form-group">
			<button type="button" onclick="location.href='@Url.Page("Create")'" class="btn btn-primary">Create New</button>
		</div>


		<table class="table">
			<thead>
				<tr>
					<th>
						@Html.DisplayNameFor(model => model.Account[0].OpenIDIssuer)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Account[0].OpenIDSubject)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Account[0].Name)
					</th>
					<th>
						@Html.DisplayNameFor(model => model.Account[0].Role)
					</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				@foreach (var item in Model.Account)
				{
					<tr>
						<td>
							@Html.DisplayFor(modelItem => item.OpenIDIssuer)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.OpenIDSubject)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.Name)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.Role)
						</td>
						<td>
							<form method="post">
								<button type="submit" asp-page-handler="Delete" asp-route-id="@item.ID" class="btn btn-danger">Delete</button>
							</form>

						</td>
					</tr>
				}
			</tbody>
		</table>
	}
	else
	{
		<h1>
			"ACCESS DENIED"
		</h1>
	}
</div>